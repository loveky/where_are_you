!function(a){function b(a){f.set({longitude:a.longitude,latitude:a.latitude})}function c(){if(!navigator.geolocation)return void alert("Geolocation is not supported by your browser");var a=function(a){var b=new BMap.Point(a.coords.longitude,a.coords.latitude);BMap.Convertor.translate(b,0,d)},b=function(){console.log("Unable to retrieve your location")};navigator.geolocation.getCurrentPosition(a,b)}function d(c){var d=new Date;a("<p>"+d.toLocaleTimeString()+" 经度: "+c.lng+", 纬度: "+c.lat+"</p>").prependTo("#messageBox"),b({longitude:c.lng,latitude:c.lat})}var e=new Firebase("https://brilliant-fire-2393.firebaseio.com/test1"),f=e.child("position"),g=new BMap.Map("map");f.on("value",function(a){var b=a.val();if(null!==b){for(var c=new BMap.Point(b.longitude,b.latitude),d=new BMap.Marker(c),e=g.getOverlays(),f=0;f<e.length;)g.removeOverlay(e[f]),f++;g.addOverlay(d),g.centerAndZoom(c,18)}}),c(),setInterval(c,5e3)}(window.jQuery);