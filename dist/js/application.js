!function(a){function b(){if(!navigator.geolocation)return void alert("Geolocation is not supported by your browser");var a=function(a){var b=new BMap.Point(a.coords.longitude,a.coords.latitude);BMap.Convertor.translate(b,0,c)},b=function(){console.log("Unable to retrieve your location")};navigator.geolocation.getCurrentPosition(a,b)}function c(b){a("#messageBox").children().length>10&&a("#messageBox").empty();var c=new Date;a("<p>"+c.toLocaleTimeString()+" 经度: "+b.lng+", 纬度: "+b.lat+"</p>").prependTo("#messageBox"),i=b,d(b),e(b)}function d(a){if(null!==a){for(var b=new BMap.Point(a.lng,a.lat),c=new BMap.Marker(b),d=h.getOverlays(),e=0;e<d.length;)h.removeOverlay(d[e]),e++;h.addOverlay(c),h.centerAndZoom(b,18)}}function e(a){g.set(j,[a.lat,a.lng])}var f=new Firebase("https://brilliant-fire-2393.firebaseio.com/geofile"),g=new GeoFire(f),h=new BMap.Map("map");h.addControl(new BMap.ScaleControl),h.addControl(new BMap.NavigationControl),h.setCenter("中国");var i,j=prompt("Please enter your name");findFirends(),setInterval(b,5e3)}(window.jQuery);